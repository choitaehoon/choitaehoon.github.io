---
title: 인스타그램 피드를 어떻게 하면 빠르게 클라이언트에 반환할 수 있을까?
date: 2020-12-01 18:50:00 
---

### 배경

인스타그램 유저들은 인플루언서의 피드를 조회하는 경우가 잦습니다. 이러한 상황에서 조회했던 피드를 다시 데이터베이스에 가져오는 것은
비효율적입니다. 그렇다면 어떻게 해야 빠르고 효율적으로 클라이언트에 반환할 수 있을까? 라는 고민이 생깁니다. 아래의 글을 살펴보면서
해결했던 과정에 대해 공유하려 합니다.

### JPA 1차 캐싱

![image](https://user-images.githubusercontent.com/33123391/101153546-f121fd00-3667-11eb-9671-6fd22570c77c.png)

JPA는 영속 컨테스트 안에 1차 캐시가 존재합니다. 1차 캐시는 트랜잭션이 시작되고 종료될 때까지만 유효한 굉장히 짧은 캐시레이어이기 때문에
인스타그램 특정 유저에 대한 피드를 조회하는 것은 적합하지 않았습니다.

### JPA 2차 캐싱

JPA 2차 캐싱은 어플리케이션 범위의 캐시를 지원하는데 종료될 때 까지 유지됩니다. 

참고 문서
* https://cupjoo.github.io/%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8